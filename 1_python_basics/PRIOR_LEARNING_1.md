# 事前学習その１: Pythonの基本

### Pythonことはじめ

さっそくPythonのコードを眺めてみましょう．下のリンクを別タブや別ウィンドウで表示してみてください．

[>> `01_print_check.py`](./01_print_check.py)

プログラムに慣れていない人向けに言っておくと，ひとまず「ゼロからコードを書く」必要はありません．まず「コードを英語のように読む」ところから始めましょう．Pythonのコードを読むのは非常に簡単です．

いくつかPythonの文法に関するコメントを書いておきます．
1. コードは１行ごとに，上から順番に実行される．
1. シャープ記号 `#` は「これ以降はコメント」の意味．つまり `#` の右側は無視される．
1. `"""` と `"""` で囲まれた部分もコメントになる．コメントの部分には日本語を入力してもよいけれど，それ以外の部分は基本的に「半角英数字」で記載する．
1. 基本的な数学の計算について，記号の対応は以下のようになっている．
  - 右辺を左辺に代入: `=`（左のほうに代入されるということに注意）
  - 足し算: `+`
  - 引き算: `-`
  - かけ算: `*`
  - わり算: `/`  
（ほかにも「`%`」で「わり算の余り」など色々とある．適宜，調べること）
1. 数字を代入した「文字」は数学でいう「変数」で，その中身を画面に出力するためは `print` 命令を使う．
1. **行の先頭を除いて** 空白（スペース）は１つの入るのも複数入るのも変わらない．行の先頭の空白だけは特殊な意味をもっている（これについては後述）．
1.  四則演算などの演算子の前後に空白が入らなくてもかまわない．

英語だと思えば読めますよね？ `print` は「印刷する」「表示する」という英単語だから，その役割を想像することは簡単なはずです．

演習の際に，実際にコードを実行すると，きちんと計算結果が出力されることを確認できますので，お楽しみに．

***
### 変数の名前の付け方
プログラムの基本は「変数」です．`x` とか `y` とか，記号のことですね．こういった変数にデータの値を入れて，その変数をすでに用意されているデータ解析用の関数に入力します．そうするとその結果が別の変数に代入されて出力として戻ってくるなど，プログラムでは「変数」を通じて色々なやり取りをします．

変数には好きな名前をつけることができます．ただし，いくつかのルールはあります．
1.  変数の名前には大文字・小文字のアルファベットやアンダーバー `_` などが使える．なお，大文字・小文字は区別される．つまり `Y` と `y` は別なものとなる．
1. Pythonがすでに用意しているいくつかの「名前」を変数名に使うことはできない．  
（ほかにも数字を使えたりもします．適当にお試しを．もしおかしな名前を使った場合には指摘してもらえるから，ルールについてはそれほど気にする必要はありません）

もっと大切なことは，変数にわかりやすい名前をつけることです．色々な人がそのコードを利用したり改良したりする場合も多いので，誤解のないようにしましょう．例えばデータ解析結果を入れる変数名が `Input_filename` ではおかしいですよね？

コードを読みやすくということも，プログラミングに慣れてきたら少しずつ意識してほしいところです．例えば [『リーダブルコード』（外部リンク）](https://www.oreilly.co.jp/books/9784873115658/) などの本を参照してみてください．Pythonに関しては [Pythonのコーディング規約（外部リンク）](https://pep8-ja.readthedocs.io/ja/latest/) もあるので，時間のあるときに眺めてみてもいいかもしれません．

***
### 条件分岐はプログラムの基本

次のコードを軽く眺めてみましょう．また別タブなどで開いてください．

[>> `02_if_check.py`](./02_if_check.py)

今度はプログラムの基本である **条件分岐** が使われています．ここで，いくつかのコメントを．
- 条件分岐は「もし〜だったら」は `if` という英単語を書けばいいだけ．
- 「そうでなければ」を意味する英単語は「else」．「そうではなくて，もし〜だったら」としたいから「else if」．ということで，それを短くした `elif` を使う．
- `elif` は何個分あってもかまわない．上から順に読んでいって，もし記載した条件が満たされなければ下の方に流れていき，どこかで条件に引っかかったらその内容が実行される．内容が実行された時点で `if` 全体から抜け出ることに注意が必要．つまり，そこから先の `elif` は無視される．
- 記載したすべての条件を満たさない場合に何かをさせたければ，最後に `else` を書けばいい．
- 条件の書きかたは適宜調べれば十分．`and` は「左右両方ともの条件が満たされていれば」であり，
`or` ならば「左右のどちらかの条件が満たされていれば」になる．

条件分岐を大量に使って頑張ってコードを書けば，「こういう状況だったら，こうやって行動する」といったような人工知能っぽい動きをさせることもできます．でもいちいち条件を書くのが大変なので，データに基づいて「状況 &rarr; 行動」を学習させる，いわゆる機械学習が必要になるわけですね．

人工知能の話はさておき， `if` を使えば，例えばデータの前処理として「こういうデータ点はどう考えてもおかしくて，計測機器のバグやアンケート調査の際のミスだから除外しよう」といったような操作が可能になります．もちろん，自分の都合の良い結論を導くために `if` を使って邪魔なデータを消す，なんてことは絶対に避けましょう．

***
### 数学の記号との対応

コード [`02_if_check.py`](./02_if_check.py) の4行目では `=` ではなく `==` という記号が使われています．Pythonでは `=` を「右辺を左辺に代入」という意味で使ってしまっているので，「右辺と左辺が等しい」ことを表すために `=` を使えません．代わりに`==`を使います．

ちなみに，数学でいう数値の「比較」をするための記号との対応は以下のとおりです．詳しくは各自で調べてみてください．

- 数学の &#61; : `=`
- 数学の &ne; : `!=`
- 数学の &gt; : `>`
- 数学の &lt; : `<`
- 数学の &ge; : `>=`
- 数学の &le; : `<=`

***
### 空白（スペース）での整形作業

Pythonのプログラミングにおいて一番大切なポイントは，**Pythonでは各行の最初の空白（スペース）で『まとまり』を表現する** ということ．これはほかのプログラミング言語にはない特徴で，これによってコードが見やすくなるというメリットがあります．

コード [`02_if_check.py`](./02_if_check.py) の `if` 文を見ると，行末にコロン `:` が書かれています．これが『まとまり開始』の合図です．そしてコードの形を見れば明らかなように，その『まとまり』が空白を使って表現されています．

空白は何文字でもかまいませんが『揃えておく』必要があります．標準的には「４文字分」の空白が使われます．emacs などのソフトウェアでコードを書いているのであれば，設定によっては tab キーを押すと勝手に空白を入れてくれたりもします．ただし，ソフトウェアによっては空白ではなく「tab」を入れてしまい，エラーのもととなるので注意が必要です．単に emacs などのプログラミング向きのソフトウェアが，勝手に「tab」を空白に変換してくれているだけのこと．とは言っても，スペースキーを連打して空白を入れるのは大変ですから，いつかはプログラミング向きの使いやすいソフトウェア（エディタ）を見つけておきたいところですね．

情報系では emacs を使うことが多いかもしれませんが，GitHubが作成した [Atom（外部リンク）](https://atom.io/) というエディタなどもあります．（もちろん vim もあります！ 情報系の人しか知らないかもしれませんが・・）

***

### 出力の基本の `print` について，もう少し
`print` は非常に大切な命令で，バグ取りなどにも重宝するのですが，コード [`02_if_check.py`](./02_if_check.py) では新しい使い方をしています．そのいくつかを紹介します．

- `print( )` の括弧のなかに変数を入れると，変数の値を出力（既に見た使い方）．
- `"` と `"` で囲まれた文字をそのまま出力する．実はPythonでは，`"sample"` のようにダブルコーテーションで囲んだ部分は「文字列」を意味する．半角英数字だけでなく，日本語も入れられる．
- 文字列のなかに波括弧 `{ }` で数字を囲み，そこに数字を書く．そして文字列の終わりの `"` の直後に`.format( )`という機能を使って，波括弧のなかに入れる変数を指定する．`format` というのはいわゆる「フォーマット」を意味する英単語で「型」とか「書式」「形式」のこと．だから `"..."` という文字列の形式を指定するために使われている，ということで理解しやすい．変数の数は波括弧に記載する数字の個数分だけ必要で，`.format( )`の1番目の変数が`{0}`に，2番目の変数が`{1}`に，3番目の変数が`{2}`に，といった対応関係がある．

**注意:** Pythonでは（そして他の多くのプログラムでも） **ゼロから数え始める** ことに注意しましょう．だから1番目の変数が `{0}` に，ということになります．この勘違いが原因でバグが生じることも多いので，特に初心者は注意しましょう．

- 波括弧の補足
  - `{0:f}`: `.format`で指定した1番目の変数を「小数点以下も明示して」出力する．
  - `{0:e}`: `.format`で指定した1番目の変数を &alpha; &times; 10<sup>&beta;</sup> の形で出力する．

（もちろん，`.format`で指定した2番目の変数の場合には`{1:f}`などとすればいい）

`e` という形式に慣れていない人がいるかもしれません．これは &alpha; &times; 10<sup>&beta;</sup> の形で，ものすごく大きな数や小さな数を見やすくするために使われます（指数表記）．いくつかの例を見ればすぐにわかるはずです．
```
  30.1 = 3.010000e+01
450.05 = 4.500500e+02
0.0104 = 1.040000e-02
```
`print` にはそのほかにも色々な機能が付いています．必要に応じて調べてみてください．

***
### データ解析で必須のリスト形式

次のコードを軽く眺めてみましょう（また別タブなどで）．

[>> `03_for_check.py`](./03_for_check.py)

数字をまとめて格納する「リスト」という形式がPythonには用意されています．使いかたは簡単で，コード [`03_for_check.py`](./03_for_check.py) の1行目のように，各括弧 `[ ]` の中に数字を入れてカンマで区切るだけです．本当は数字以外を入れることもできますが，データは数字で表現されることが多いので，ひとまず数字だけを考えることにしましょう．

また，リストに要素を追加することもできます．5行目の `.append` に注目．「append」は「追加する」という英単語です．つまり `mylist` に追加するので，`mylist.append( )` と書きます．削除などもできますが，各自で調べてみてください．

`print` で出力させるとリスト形式でそのまま表示されますし，リストのひとつの要素だけを取り出す場合には `mylist[0]` のようにします．これで１番目の要素を取り出せます．ここでもやっぱり **要素はゼロから数えること** に注意してください．

なお，`mylist[1:5]` とすると
- `mylist[1]`，すなわち２番目の要素から
- `mylist[5]`，すなわち６番目の要素の「手前まで」

の意味になります． `:` を間に入れることで「ここから，ここまで」となります．ただし，「要素はゼロから数える」ということと，「指定した要素の手前まで」ということに注意してください．

***
### コンピュータでの繰り返しの作業

コード [`03_for_check.py`](./03_for_check.py) の11行目から13行目までと，16行目と17行目がそれぞれ「繰り返し」のまとまりです．`if` のときと同じように，「まとまり」が空白でわかりやすくなっているのがPythonのいいところのひとつですよね．

英語の `for` は「〇〇のために」とか「〇〇に対して」という意味がありますし，`in` については特に解説はいらないでしょうから，英語がわかればコードを読むことにはそれほど苦労しないで済みます．

なお，11行目には

```python
for value in mylist:
```

と書かれています．これは「`mylist` の要素を `value` にコピーして，その `value` に対して以下の操作を繰り返せ」という意味です．これで `mylist` に入っている要素をひとつずつ取り出しながら，同じ処理，単純作業をコンピュータにやらせることができます．

なお，この `value` という変数の名前は何でもいいことに注意してください．変数名は自分でつけられます．`v` のように1文字だけでもいいし，もっと長くても大丈夫です．また，この変数はその場限りのものであって，`for` を抜け出たら使えなくなります（「スコープ」という概念）．逆に，いったん忘れ去られる運命の変数の名前ですから，次の `for` の部分でまた同じ名前を再利用してもかまいません．

***
### リストを使った繰り返しの追加のテクニック

コード [`03_for_check.py`](./03_for_check.py) の16行目には

```python
for i, value in enumerate(mylist):
```

のように少し違う書き方が出てきます．この `enumerate` というのは「列挙する」とか「数えあげる」という意味の英単語で，「`mylist` の `i` 番目の要素を `value` に代入」のように，`i` 番目であることを数えあげながらの処理を意味しています．

この機能，実はかなり便利です．実際，`enumerate` を使うことで「人間にわかりやすい出力」をできます．実際に演習で結果を見て，実感してください．

***
### リストから取り出した値についての注意

コード [`03_for_check.py`](./03_for_check.py) の11行目から13行目には「`mylist` から `value` を取り出し，それに `1.0` を加えて出力」という手順が記載されています．注意してほしいことは，そのあとの16行目と17行目での `for` で `mylist` をもう一度使っていることです．
手前の `for` のところで `1.0` が足し算されているから，では `mylist` そのものが変更されるのか・・と言うと，そういうことではありません．これは後半部分の出力を実際に見て，確認してください．

`for` では「値を取り出しながら処理を繰り返す」というところがポイントです．取り出した値は `mylist` そのものではないので `mylist` は変更を受けません．

では `mylist` の値を変更するためにはどうすればいいのでしょうか・・という点については，コード [`03_for_check.py`](./03_for_check.py) の19行目から一目瞭然ですね．


***
### 今後を見据えたコメント

Pythonにはもっとたくさんの関数が用意されています．またデータの形式についても，紹介したリストのほかに「タプル」とか「辞書」といった別のデータ形式も最初から用意されています．繰り返し作業のところでも，`for` 以外によく使われるものとして `while` といった命令もあります．

さらに，複雑な処理を再利用しやすくするための方法も用意されています．`print` という「関数」はPythonがはじめから用意してくれていますが，こういった関数を自分で作ることもできます．
それには`def`という命令を使います．そしておそらくプログラミング言語を勉強する上でとても高いハードルの「オブジェクト指向」，そのための`class`といったものについても，Webで発見できるサンプルコードに使われることもありますので，将来的には少なくとも「読める」ようになる必要はあるでしょう．

でも，Pythonを学び始めた最初のときからすべてを知ろうとする必要はありませんし，すべてを知ろうとしてから・・，と思うと「つまらない」世界に迷い込んでしまう可能性もあります．目的のために手段を選ばず，であって，手段であるPythonそのものが面白くなってしまって深く深く沈み込んでいく，というのでは本末転倒ですよね．目的は「データを解析して，活かすこと」であって，Pythonはその手段です．

まずはコードを読めるようになることが大切です．そしてPythonは読みやすいですよね？

英語を読むためにすべての英単語を知っておく必要はありませんし，細かい文法にまで熟知している必要もありません．わからない単語はその都度調べればいいし，語形変化なんて知らなくてもなんとなく意味はわかります．「書こう」とすると知識が必要になりますが，「いじってみる」だけならばそれほど知識はいりません．さらに嬉しいことに，Pythonの場合には間違っていればエラーメッセージを返してくれるわけです．だからとにかく試せばいいわけですね．他人のコードを読んで，改造して，自分の目的にあった形で利用すればいいわけです（もちろん，著作権には注意を！）．

もちろん他人の書いたコードが，かなり複雑で理解しづらい場合もあります．そういった読みづらいコードを見つけてしまったら・・運が悪いと諦めましょう．読みやすいコードを探しましょう．

データ解析には，あとで scikit-learn というモジュールを使うことが多いのですが，きちんとWebのマニュアルが整備されていて，公式ページに読みやすくてシンプルで綺麗なコードが置いてあったりもします．

慣れてきたら読みづらいコードを自分なりに書き直してみる作業に取り組んでみるのもいいでしょう．そういった書き直しの作業は上達のための訓練にもなります．

***
[>> Pythonの基本的な使い方のトップページに戻る](./README.md)
***
<img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"> &nbsp; Jun Ohkubo
